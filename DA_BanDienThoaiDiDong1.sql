CREATE DATABASE QuanLy_BanHang_DienThoai
go

USE QuanLy_BanHang_DienThoai
go

SET ANSI_NULLS ON
GO  
SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE Tb_LOAISANPHAM(
	MALOAISP varchar(10) not null,
	TENLOAISP nvarchar(50) not null,
	MOTA nvarchar(150) not null, 
	CONSTRAINT p_k_mlsp PRIMARY KEY CLUSTERED 
	(MALOAISP ASC))
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO

CREATE TABLE Tb_NHACUNGCAP(
	MANHACUNGCAP varchar(10) not null,
	TENNHACUNGCAP nvarchar(50) not null,
	DIACHI nvarchar(60) not null,
	GIOITINH nvarchar(3) not null,
	NGAYSINH_NCC DateTime,
	PHONE nvarchar(24) not null CONSTRAINT p_k_phone CHECK (PHONE like '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'),
	CONSTRAINT p_k_NCC PRIMARY KEY CLUSTERED 
	(MANHACUNGCAP ASC)
	)
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE Tb_SANPHAM(
	MASP varchar(10) not null,
	TENSP nvarchar(50) not null,
	XUATXU nvarchar(50) not null,
	MANHACUNGCAP varchar(10) not null,
	MALOAISP varchar(10) not null, 
	DONVITINH nvarchar(40) not null,
	DONGIA float not null,
	SOLUONG int not null,
	CONSTRAINT p_k_sp PRIMARY KEY CLUSTERED 
	(MASP ASC)
	)
GO

---Thêm khóa ngoại cho bảng sản phẩm
ALTER TABLE Tb_SANPHAM WITH CHECK ADD CONSTRAINT P_K_MNCC FOREIGN KEY (MANHACUNGCAP) REFERENCES Tb_NHACUNGCAP(MANHACUNGCAP)
--ON UPDATE CASCADE ON DELETE CASCADE ----lưu ý: WITH CHECK là kích hoạt ràng buộc kiểm tra
go

ALTER TABLE Tb_SANPHAM WITH CHECK ADD CONSTRAINT P_K_LSP FOREIGN KEY (MALOAISP) REFERENCES Tb_LOAISANPHAM(MALOAISP)
--ON UPDATE CASCADE ON DELETE CASCADE ----lưu ý: WITH CHECK là kích hoạt ràng buộc kiểm tra
go

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE Tb_KHACHHANG(
	MAKHACHHANG varchar(10) not null,
	TENKHACHHANG nvarchar(50) not null,
	GIOITINH_KH nvarchar(3) not null,
	SODIENTHOAI nvarchar(24) not null CONSTRAINT p_k_SDT CHECK (SODIENTHOAI like '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'),
	DIACHI nvarchar(50) not null,
	NGAYSINH DateTime not null,
	CONSTRAINT p_k_kh PRIMARY KEY CLUSTERED
	(MAKHACHHANG ASC))
go

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE Tb_NHANVIEN(
	MANHANVIEN varchar(10) not null,
	TENNHANVIEN nvarchar(50) not null,
	GIOITINH_NV nvarchar(3) null,
	SODIENTHOAI nvarchar(24) not null CONSTRAINT p_k_sodienthoai CHECK (SODIENTHOAI like '[0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9][0-9]'),

	DIACHI nvarchar(50) not null,
	NGAYSINH DateTime not null,
	LUONGCOBAN float not null,
	PHUCAP INT not null,
	CONSTRAINT p_k_nv PRIMARY KEY CLUSTERED
	(MANHANVIEN ASC))
GO

SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE Tb_HOADON(
	MAKHACHHANG varchar(10) not null, 
	MANHANVIEN varchar(10) not null, 
	MAHOADON varchar(10) not null,
	CONSTRAINT p_k_hd PRIMARY KEY CLUSTERED
	(MAHOADON ASC))
GO


-----Thêm khóa ngoại cho bảng Hóa Đơn
ALTER TABLE Tb_HOADON WITH NOCHECK ADD CONSTRAINT P_K_MAKH FOREIGN KEY (MAKHACHHANG) REFERENCES Tb_KHACHHANG(MAKHACHHANG)


ALTER TABLE Tb_HOADON WITH CHECK ADD CONSTRAINT P_K_MNV FOREIGN KEY (MANHANVIEN) REFERENCES Tb_NHANVIEN(MANHANVIEN)
--ON UPDATE CASCADE ON DELETE CASCADE ----lưu ý: WITH CHECK là kích hoạt ràng buộc kiểm tra
GO


SET ANSI_NULLS ON
GO
SET QUOTED_IDENTIFIER ON
GO
CREATE TABLE Tb_CHITIETHOADON (
	 MASP varchar(10) not null, 
	 MAHOADON varchar(10) not null, 
	 SOLUONG int not null,
	 GIABAN float not null,
	 NGAYDATHANG DateTime not null,
	CONSTRAINT p_k_ctsp PRIMARY KEY CLUSTERED
	(MASP ASC, MAHOADON ASC))
GO

----Thêm khóa ngoại cho bảng chi tiết hóa đơn
ALTER TABLE Tb_CHITIETHOADON WITH NOCHECK ADD CONSTRAINT P_K_MASP FOREIGN KEY (MASP) REFERENCES Tb_SANPHAM(MASP)
GO

ALTER TABLE Tb_CHITIETHOADON WITH NOCHECK ADD CONSTRAINT P_K_MHD FOREIGN KEY (MAHOADON) REFERENCES Tb_HOADON(MAHOADON)
GO
----lưu ý: WITH NOCHECK là là vô hiệu hóa ràng buộc kiểm tra

CREATE TABLE Tb_HOADONNHAP(
	MAHOADONNHAP varchar(10) not null PRIMARY KEY,
	MANHACUNGCAP varchar(10) not null,
	NGAYNHAP DATETIME not null,
	THANHTIEN float
)
	
ALTER TABLE Tb_HOADONNHAP WITH CHECK ADD CONSTRAINT P_K_HDN FOREIGN KEY (MANHACUNGCAP) REFERENCES Tb_NHACUNGCAP(MANHACUNGCAP)


CREATE TABLE Tb_CTHOADONNHAP(
	MAPHIEUNHAP varchar(10) not null,
	MAHOADONNHAP varchar(10) not null,
	MASP varchar(10) not null,
	SOLUONG INT,
	GIANHAP float,
	
	PRIMARY KEY(MAPHIEUNHAP))

ALTER TABLE Tb_CTHOADONNHAP ADD CONSTRAINT P_K_CT FOREIGN KEY (MAHOADONNHAP) REFERENCES Tb_HOADONNHAP(MAHOADONNHAP)

ALTER TABLE Tb_CTHOADONNHAP ADD CONSTRAINT P_K_CTHDNSP FOREIGN KEY (MASP) REFERENCES Tb_SANPHAM(MASP)


-----Chèn dữ liệu vào bảng loại sản phẩm
INSERT INTO Tb_LOAISANPHAM(MALOAISP, TENLOAISP, MOTA)
VALUES('MLSP101', N'IPHONE', N'Tính Năng Vượt Trội.')
INSERT INTO Tb_LOAISANPHAM(MALOAISP, TENLOAISP, MOTA)
VALUES('MLSP102', N'SAMSUNG ', N'Chất Lượng Tốt')
INSERT INTO Tb_LOAISANPHAM(MALOAISP, TENLOAISP, MOTA)
VALUES('MLSP103', N'XIAOMI', N'Pin Trâu')
INSERT INTO Tb_LOAISANPHAM(MALOAISP, TENLOAISP, MOTA)
VALUES('MLSP104', N'OPPO', N'Chụp Ảnh Đẹp')
INSERT INTO Tb_LOAISANPHAM(MALOAISP, TENLOAISP, MOTA)
VALUES('MLSP105', N'VIVO', N'Giá Rẻ')
INSERT INTO Tb_LOAISANPHAM(MALOAISP, TENLOAISP, MOTA)
VALUES('MLSP106', N'NOKIA', N'Giá Thành Phù Hợp Túi Tiền.')


-----Thêm dữ liệu vào bảng NHACUNGCAP
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC101', N'Nguyễn Thị Mai Hoa', N'Văn Giang',N'Nữ', '10/02/2000', '0936452113')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC102',N'Phạm Thị Hòa', N'Văn Lâm', N'Nữ', '06/22/2001', '0956452113')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC103', N'Lê Thị Hằng', N'Khoái Châu', N'Nữ', NULL, '0936489113')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC104', N'Nguyễn Thị Thu', N'Hà Nội', N'Nữ', '09/16/1997', '0336452113')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC105', N'Nguyễn Văn Mạnh', N'Hà Nội', N'Nam', '05/25/1999','0936692113')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC106', N'Nguyễn Thanh Tùng', N'Thái Bình', N'Nam', NULL, '0365252113')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC107', N'Dương Dương', N'Hà Nội', N'Nam', '12/28/2000', '0936489113')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC108', N'Noo Phước Thịnh', N'Hồ Chí Minh', N'Nam', '09/18/2001', '0937952112')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC109', N'Nhậm Gia Luân', N'Hà Nội', N'Nam', '10/11/2002', '0366445113')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC110', N'Vương Nhất Bác', N'Hồ Chí Minh', N'Nam', '01/01/2000', '0936453613')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC111', N'Cung Tuấn', N'Hồ Chí Minh', N'Nam', '11/24/1999', '0936453656')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC112', N'Trương Triết Hạn', N'Hà Nội', N'Nam', '05/4/1999', '0936455813')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC113', N'Hàn Tuyết', N'Hà Nội', N'Nữ', '05/04/2002', '0936455813')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC120', N'Đông Nhi', N'Hồ Chí Minh', N'Nữ', '11/20/1999', '0934512656')
INSERT INTO Tb_NHACUNGCAP(MANHACUNGCAP, TENNHACUNGCAP, DIACHI, GIOITINH, NGAYSINH_NCC, PHONE)
VALUES('MNCC121', N'Ông Cao Thắng', N'Hà Nội', N'Nam', '05/4/1997', '0936456813')

----Thêm dữ liệu vào bảng SANPHAM
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP101', N'iphone13', N'ZG/Đan Mạch', 'MNCC101', 'MLSP101', 'VND', 37790000, 14)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP121', N'iphone11', N'Pháp', 'MNCC101', 'MLSP101', 'VND', 27980000, 25)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP123', N'SamSung A03', N'KH/Hàn Quốc', 'MNCC101', 'MLSP102', 'VND', 3990000, 38)

INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP102', N'Xiaomi 10', N'Trung Quốc', 'MNCC102', 'MLSP103', 'VND', 5790000, 10)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP122', N'Oppo 5G', N'Trung Quốc', 'MNCC102', 'MLSP104', 'VND', 6790000, 15)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP103', N'Xiaomi 11-T3', N'Trung Quốc', 'MNCC103', 'MLSP103', 'VND', 9790000, 25)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP124', N'Xiaomi 11', N'Trung Quốc', 'MNCC103', 'MLSP103', 'VND', 9290000, 29)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP104', N'Xiaomi 9', N'Trung Quốc', 'MNCC104', 'MLSP103', 'VND', 4990000, 13)

INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP105', N'SamSung A03S', N'Hàn Quốc', 'MNCC105', 'MLSP102', 'VND', 6790000, 12)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP106', N' SamSung A03S', N'Hàn Quốc', 'MNCC106', 'MLSP102', 'VND', 7890000, 10)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP125', N'SamSung S21', N'Trung Quốc', 'MNCC106', 'MLSP102', 'VND', 6790000, 13)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP126', N'Oppo A74', N'Trung Quốc', 'MNCC106', 'MLSP104', 'VND',5890000, 27)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP107', N'Oppo A94', N'Trung Quốc', 'MNCC107', 'MLSP104', 'VND', 6890000, 12)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP108', N'iphone13pro', N'Hoa Kỳ', 'MNCC108', 'MLSP101', 'VND', 38790000, 10)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP109', N'iphone12', N'Hoa Kỳ', 'MNCC109', 'MLSP101', 'VND', 23790000, 24)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP127', N'iphoneX', N'Bồ Đào Nha', 'MNCC109', 'MLSP101', 'VND',15790000, 16)

INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP128', N'vivo Y30', N'Trung Quốc', 'MNCC109', 'MLSP105', 'VND', 4990000, 11)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP110', N'Nokia 255', N'Phần Lan', 'MNCC110', 'MLSP106', 'VND', 355000, 11)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP111', N'vivo Y19', N'Trung Quốc', 'MNCC111', 'MLSP105', 'VND', 4790000, 10)-----
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP112', N'Nokia 210', N'Phần Lan', 'MNCC112', 'MLSP106', 'VND', 699000, 10)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP129', N'Xiaomi Redmi Note 11 Pro', N'Trung Quốc', 'MNCC111', 'MLSP103', 'VND', 6990000, 17)
INSERT INTO Tb_SANPHAM(MASP, TENSP, XUATXU, MANHACUNGCAP, MALOAISP, DONVITINH, DONGIA, SOLUONG)
VALUES('MSP120', N'vivo U10', N'Trung Quốc', 'MNCC113', 'MLSP105', 'VND', 3790000, 11)

----Thêm dữ liệu vào bảng KHACHHANG
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH101', N'Triệu Lệ Dĩnh', N'Nữ', '0935468921', N'Hà Nội', '4/15/1986')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH102', N'Dương Mịch', N'Nữ', '0935456921', N'Hà Nội', '1/1/1985')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH103', N'Hứa Khải', N'Nam', '0365468921', N'Đà Nẵng', '8/29/1999')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH104', N'Triệu Lộ Tư', N'Nữ', '0935468921', N'Hải Phòng', '7/21/2001')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH105', N'Viên Băng Nghiên', N'Nữ', '0935489921', N'Hà Nội', '12/22/2000')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH106', N'Hồ Quang Hiếu', N'Nam', '0365468921', N'Hồ Chí Minh', '02/01/2000')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH107', N'Nguyễn Trần Trung Quân', N'Nam', '0365468921', N'Hà Nội', '06/19/2001')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH108', N'Bùi Anh Tuấn', N'Nam', '0935463621', N'Hà Nội', '08/12/1999')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH109', N'Tiêu Chiến', N'Nam', '0935468891', N'Hà Nội', '06/15/2001')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH110', N'Phùng Thiệu Phong', N'Nam', '0335468921', N'Hồ Chí Minh', '11/12/1986')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH113', N'Trương Hàn', N'Nam', '0335468561', N'Hà Nội', '09/01/1986')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH114', N'Trương Bân Bân', N'Nam', '0335668561', N'Hà Nội', '11/23/1986')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH120', N'Huỳnh Tông Trạch', N'Nam', '0335456561', N'Hà Nội', '10/01/1999')
INSERT INTO Tb_KHACHHANG(MAKHACHHANG, TENKHACHHANG, GIOITINH_KH, SODIENTHOAI, DIACHI, NGAYSINH)
VALUES('MKH121', N'Lưu Thi Thi', N'Nữ', '0335664561', N'Hà Nội', '11/22/2001')

---Thêm dữ liệu vào bảng NHANVIEN
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV101', N'Nguyễn Thị Thùy Linh', N'Nữ', '0335463921', N'Hà Nội', '09/10/2001', 2000.000, 500.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV102', N'Trần Thị Huyền', N'Nữ', '0335453921', N'Hà Nội', '01/23/2001', 2000.000, 400.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV103', N'Chu Văn Lâm', N'Nam', '0335463781', N'Hà Nội', '12/10/2001', 2000.000, 300.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV104', N'Lê Thị Minh Khai', N'Nữ', '0382463921', N'Hải Dương', '06/21/2002', 2000.000, 500.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV105', N'Nguyễn Quốc Việt', N'Nam', '0335463921', N'Hưng Yên', '12/10/2001', 3000.000, 500.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV106', N'Đặng Phong Quân', N'Nam', '0335453921', N'Hưng Yên', '04/23/2002', 1500.000, 500.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV107', N'Nguyễn Duy Quyết', N'Nam', '0331563921', N'Hà Nội', '12/19/2000', 3500.000, 500.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV108', N'Nguyễn Anh Tuấn', N'Nam', '0338963921', N'Hưng Yên', '03/12/2001', 2000.000, 500.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV109', N'Mai Quang Minh', N'Nam', '0335463989', N'Hà Nội', '11/11/2001', 1800.000, 400.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV110', N'Lương Phong Linh', N'Nữ', '0346463921', N'Hà Nội', '01/10/2002', 2000.000, 500.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV111', N'Lương Phong Lan', N'Nữ', '0356463921', N'TP. Huế', '06/10/2001', 2000.000, 500.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV112', N'Lương Phong Thiên', N'Nam', '0346464521', N'Hà Nội', '11/10/2002', 2500.000, 300.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV120', N'Lương Phong Lâm', N'Nam', '0356478921', N'Hải Phòng', '06/10/2001', 2300.000, 500.000)
INSERT INTO Tb_NHANVIEN(MANHANVIEN, TENNHANVIEN, GIOITINH_NV, SODIENTHOAI, DIACHI, NGAYSINH, LUONGCOBAN, PHUCAP)
VALUES('MNV121', N'Lương Phong Thanh', N'Nữ', '0346446521', N'Hà Nội', '11/10/2002', 2500.000, 300.000)

----Thêm dữ liệu vào bảng HOADON
INSERT INTO Tb_HOADON(MAKHACHHANG, MANHANVIEN, MAHOADON)
VALUES('MKH101', 'MNV101', 'MHD101')
INSERT INTO Tb_HOADON(MAKHACHHANG, MANHANVIEN,  MAHOADON)
VALUES('MKH102', 'MNV102','MHD102')
INSERT INTO Tb_HOADON(MAKHACHHANG, MANHANVIEN, MAHOADON)
VALUES('MKH103', 'MNV103', 'MHD103')
INSERT INTO Tb_HOADON(MAKHACHHANG, MANHANVIEN, MAHOADON)
VALUES('MKH104', 'MNV104', 'MHD104')
INSERT INTO Tb_HOADON(MAKHACHHANG, MANHANVIEN,  MAHOADON)
VALUES('MKH105', 'MNV105',  'MHD105')
INSERT INTO Tb_HOADON(MAKHACHHANG, MANHANVIEN, MAHOADON)
VALUES('MKH106', 'MNV106',  'MHD106')
INSERT INTO Tb_HOADON(MAKHACHHANG, MANHANVIEN,  MAHOADON)
VALUES('MKH107', 'MNV107',  'MHD107')
INSERT INTO Tb_HOADON(MAKHACHHANG, MANHANVIEN,  MAHOADON)
VALUES('MKH108', 'MNV108', 'MHD108')
INSERT INTO Tb_HOADON(MAKHACHHANG, MANHANVIEN,  MAHOADON)
VALUES('MKH109', 'MNV109',  'MHD109')
INSERT INTO Tb_HOADON(MAKHACHHANG, MANHANVIEN,  MAHOADON)
VALUES('MKH110', 'MNV110', 'MHD110')
INSERT INTO Tb_HOADON(MAKHACHHANG, MANHANVIEN,  MAHOADON)
VALUES('MKH111', 'MNV111', 'MHD111')

----Thêm dữ liệu vào bảng CHITIETHOADON bán
INSERT INTO Tb_CHITIETHOADON(MASP,MAHOADON, SOLUONG, GIABAN, NGAYDATHANG)
VALUES('MSP101', 'MHD101', 6, 350.000, '03/03/2020')
INSERT INTO Tb_CHITIETHOADON(MASP,MAHOADON, SOLUONG,  GIABAN, NGAYDATHANG)
VALUES('MSP102', 'MHD102', 4, 450.000, '01/13/2021')
INSERT INTO Tb_CHITIETHOADON(MASP,MAHOADON, SOLUONG,  GIABAN, NGAYDATHANG)
VALUES('MSP103', 'MHD103', 2, 55.000, '08/24/2020')
INSERT INTO Tb_CHITIETHOADON(MASP,MAHOADON, SOLUONG,  GIABAN, NGAYDATHANG)
VALUES('MSP104', 'MHD104', 6, 200.000, '07/11/2020')
INSERT INTO Tb_CHITIETHOADON(MASP,MAHOADON, SOLUONG,  GIABAN, NGAYDATHANG)
VALUES('MSP105', 'MHD105', 8, 50.000, '08/09/2020')
INSERT INTO Tb_CHITIETHOADON(MASP,MAHOADON, SOLUONG,  GIABAN, NGAYDATHANG)
VALUES('MSP106', 'MHD106', 3, 350.000, '10/12/2020')
INSERT INTO Tb_CHITIETHOADON(MASP,MAHOADON, SOLUONG,  GIABAN, NGAYDATHANG)
VALUES('MSP107', 'MHD107', 5, 300.000, '03/22/2020')
INSERT INTO Tb_CHITIETHOADON(MASP,MAHOADON, SOLUONG,  GIABAN, NGAYDATHANG)
VALUES('MSP108', 'MHD108', 2, 450.000, '11/25/2020')
INSERT INTO Tb_CHITIETHOADON(MASP,MAHOADON, SOLUONG,  GIABAN, NGAYDATHANG)
VALUES('MSP109', 'MHD109', 4, 300.000, '01/12/2020')
INSERT INTO Tb_CHITIETHOADON(MASP,MAHOADON, SOLUONG,  GIABAN, NGAYDATHANG)
VALUES('MSP110', 'MHD110', 5, 10.000, '12/12/2020')
INSERT INTO Tb_CHITIETHOADON(MASP, MAHOADON, SOLUONG, GIABAN, NGAYDATHANG)
VALUES('MSP116', 'MHD111', 2, 300.000, '02/02/2020')

---Chèn dữ liệu vào bảng hóa đơn nhập
INSERT INTO Tb_HOADONNHAP(MAHOADONNHAP, MANHACUNGCAP, NGAYNHAP, THANHTIEN)
VALUES('HDN01', 'MNCC101', '01/12/2021', 500000)

INSERT INTO Tb_HOADONNHAP(MAHOADONNHAP, MANHACUNGCAP, NGAYNHAP, THANHTIEN)
VALUES('HDN02', 'MNCC102', '01/12/2021', 450000)

INSERT INTO Tb_HOADONNHAP(MAHOADONNHAP, MANHACUNGCAP, NGAYNHAP, THANHTIEN)
VALUES('HDN03', 'MNCC103', '11/12/2021', 1500000)

-----Chèn dữ liệu vào bảng chi tiết hóa đơn nhập
INSERT INTO Tb_CTHOADONNHAP(MAPHIEUNHAP, MAHOADONNHAP, MASP, SOLUONG, GIANHAP)
VALUES('MPN01', 'HDN01', 'MSP101', 145, 500000)

INSERT INTO Tb_CTHOADONNHAP(MAPHIEUNHAP, MAHOADONNHAP, MASP, SOLUONG, GIANHAP)
VALUES('MPN02', 'HDN02', 'MSP102', 200, 500000)


select * from Tb_SANPHAM

UPDATE Tb_SANPHAM SET SOLUONG = ((SELECT SOLUONG FROM Tb_SANPHAM WHERE MASP = '1231') - 1 ) WHERE MASP = '1231';